\hypertarget{shared__memory_8hpp}{}\section{include/shared\+\_\+memory/shared\+\_\+memory.hpp File Reference}
\label{shared__memory_8hpp}\index{include/shared\+\_\+memory/shared\+\_\+memory.\+hpp@{include/shared\+\_\+memory/shared\+\_\+memory.\+hpp}}


This file declares a class that is used for shared memory segment introspection (e.\+g. used and free memory)  


{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$map$>$}\\*
{\ttfamily \#include $<$mutex$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$vector$>$}\\*
{\ttfamily \#include $<$eigen3/\+Eigen/\+Core$>$}\\*
{\ttfamily \#include $<$boost/interprocess/allocators/allocator.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/interprocess/containers/deque.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/interprocess/containers/string.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/interprocess/containers/vector.\+hpp$>$}\\*
{\ttfamily \#include $<$boost/interprocess/managed\+\_\+shared\+\_\+memory.\+hpp$>$}\\*
{\ttfamily \#include \char`\"{}shared\+\_\+memory/exceptions.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}shared\+\_\+memory/segment\+\_\+info.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}shared\+\_\+memory/serializer.\+hpp\char`\"{}}\\*
{\ttfamily \#include $<$shared\+\_\+memory/shared\+\_\+memory.\+hxx$>$}\\*
Include dependency graph for shared\+\_\+memory.\+hpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{shared__memory_8hpp__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{shared__memory_8hpp__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structshared__memory_1_1ShmTypeHelper}{shared\+\_\+memory\+::\+Shm\+Type\+Helper$<$ Elem\+Type $>$}
\begin{DoxyCompactList}\small\item\em \hyperlink{structshared__memory_1_1ShmTypeHelper}{Shm\+Type\+Helper} is a small struct that allow the definition of templated typedef. \end{DoxyCompactList}\item 
class \hyperlink{classshared__memory_1_1SharedMemorySegment}{shared\+\_\+memory\+::\+Shared\+Memory\+Segment}
\begin{DoxyCompactList}\small\item\em The \hyperlink{classshared__memory_1_1SharedMemorySegment}{Shared\+Memory\+Segment} contains the pointers of the shared objects in on shared memrory segment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespaceshared__memory}{shared\+\_\+memory}
\begin{DoxyCompactList}\small\item\em All templated types in this namespaces are elementary types\+: int, double, float, char$\ast$, ... \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries S\+H\+A\+R\+E\+D\+\_\+\+M\+E\+M\+O\+R\+Y\+\_\+\+H\+PP}\hypertarget{shared__memory_8hpp_af8fac614ab43478ad2a38d973f7ead6a}{}\label{shared__memory_8hpp_af8fac614ab43478ad2a38d973f7ead6a}

\item 
\#define {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+M\+E\+M\+O\+R\+Y\+\_\+\+S\+I\+ZE}~65536\hypertarget{shared__memory_8hpp_acd2f5089f8d2870e833cdc9f7af461ec}{}\label{shared__memory_8hpp_acd2f5089f8d2870e833cdc9f7af461ec}

\item 
\#define {\bfseries M\+A\+P\+\_\+\+S\+T\+R\+I\+N\+G\+\_\+\+K\+E\+Y\+\_\+\+S\+E\+P\+A\+R\+A\+T\+OR}~\textquotesingle{};\textquotesingle{}\hypertarget{shared__memory_8hpp_af899411657e43cb548bc58ef7d88bec9}{}\label{shared__memory_8hpp_af899411657e43cb548bc58ef7d88bec9}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::map$<$ std\+::string, std\+::pair$<$ void $\ast$, std\+::size\+\_\+t $>$ $>$ \hyperlink{namespaceshared__memory_ae50b2192256821112a69e47d5314b467}{shared\+\_\+memory\+::\+Shm\+Objects}\hypertarget{namespaceshared__memory_ae50b2192256821112a69e47d5314b467}{}\label{namespaceshared__memory_ae50b2192256821112a69e47d5314b467}

\begin{DoxyCompactList}\small\item\em Shm\+Objects typedef is a simple renaming that ease the for loop writting. \end{DoxyCompactList}\item 
typedef Shm\+Type\+Helper$<$ char $>$\+::Elem\+Type\+Allocator \hyperlink{namespaceshared__memory_a36a105df63154c883e86f4282f380647}{shared\+\_\+memory\+::\+Shm\+Char\+Allocator}\hypertarget{namespaceshared__memory_a36a105df63154c883e86f4282f380647}{}\label{namespaceshared__memory_a36a105df63154c883e86f4282f380647}

\begin{DoxyCompactList}\small\item\em Create a char allocator to ease the creation of strings. \end{DoxyCompactList}\item 
typedef std\+::basic\+\_\+string$<$ char, std\+::char\+\_\+traits$<$ char $>$, Shm\+Char\+Allocator $>$ \hyperlink{namespaceshared__memory_a07ee51d077030d33ba8408f5938569cc}{shared\+\_\+memory\+::\+Shm\+String}\hypertarget{namespaceshared__memory_a07ee51d077030d33ba8408f5938569cc}{}\label{namespaceshared__memory_a07ee51d077030d33ba8408f5938569cc}

\begin{DoxyCompactList}\small\item\em Create a basic\+\_\+string type for the Shared Memory. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{namespaceshared__memory_ac8ef94dc78f444092f488f0143b155f2}{shared\+\_\+memory\+::set\+\_\+segment\+\_\+sizes} (uint multiplier\+\_\+1025)
\begin{DoxyCompactList}\small\item\em sets the size of the segments that will be newly created via the set methods. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_a841687861fcc9efe381ffbe84843ca33}{shared\+\_\+memory\+::set\+\_\+default\+\_\+segment\+\_\+sizes} ()\hypertarget{namespaceshared__memory_a841687861fcc9efe381ffbe84843ca33}{}\label{namespaceshared__memory_a841687861fcc9efe381ffbe84843ca33}

\begin{DoxyCompactList}\small\item\em set the size of segment newly created to the default size value of 65536 \end{DoxyCompactList}\item 
Shared\+Memory\+Segment \& \hyperlink{namespaceshared__memory_a7c76ec22ab70d3b7487becd3ec9943bc}{shared\+\_\+memory\+::get\+\_\+segment} (const std\+::string \&segment\+\_\+id, const bool clear\+\_\+upon\+\_\+destruction=false)
\begin{DoxyCompactList}\small\item\em get\+\_\+segment creates or give back a pointer to a \hyperlink{classshared__memory_1_1SharedMemorySegment}{Shared\+Memory\+Segment} object. \end{DoxyCompactList}\item 
Segment\+Info \hyperlink{namespaceshared__memory_a70f7613a247615e323cab083934c803e}{shared\+\_\+memory\+::get\+\_\+segment\+\_\+info} (const std\+::string \&segment\+\_\+id, const bool clear\+\_\+upon\+\_\+destruction=false)
\begin{DoxyCompactList}\small\item\em performs introspection on the segment and return related information. \end{DoxyCompactList}\item 
bool \hyperlink{namespaceshared__memory_a82297c2b7b85c57c53578749c9bd6429}{shared\+\_\+memory\+::segment\+\_\+exists} (const std\+::string \&segment\+\_\+id)
\begin{DoxyCompactList}\small\item\em returns true if a segment exists under this id \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_a60cbce63ae7fb64a2758b773f9006471}{shared\+\_\+memory\+::delete\+\_\+segment} (const std\+::string \&segment\+\_\+id)
\begin{DoxyCompactList}\small\item\em delete\+\_\+segment deletes the segment of existing shared memory. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_a1f88dd41dca9a23387090866213dbd85}{shared\+\_\+memory\+::delete\+\_\+all\+\_\+segment} ()\hypertarget{namespaceshared__memory_a1f88dd41dca9a23387090866213dbd85}{}\label{namespaceshared__memory_a1f88dd41dca9a23387090866213dbd85}

\begin{DoxyCompactList}\small\item\em delete\+\_\+all\+\_\+segment delete all mapping to the shared memory used during the current process \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\bool \hyperlink{namespaceshared__memory_a7b43b29fa0aa6a5cad0ca47afdd03e83}{shared\+\_\+memory\+::delete\+\_\+object} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id)
\begin{DoxyCompactList}\small\item\em delete\+\_\+object deletes a particular object in the shared memory segment \end{DoxyCompactList}\item 
boost\+::interprocess\+::interprocess\+\_\+mutex \& \hyperlink{namespaceshared__memory_aed33c9701140a1c43e40f182a380199b}{shared\+\_\+memory\+::get\+\_\+segment\+\_\+mutex} (const std\+::string segment\+\_\+id)
\begin{DoxyCompactList}\small\item\em get\+\_\+sgement\+\_\+mutex aquiere a reference to the semgent global mutex. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_aa8583540879db53fc80b31410b5eec68}{shared\+\_\+memory\+::clear\+\_\+shared\+\_\+memory} (const std\+::string \&segment\+\_\+id)
\begin{DoxyCompactList}\small\item\em clear\+\_\+shared\+\_\+memory\+\_\+segment destroys the shared memory \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_ace68bf582cfe50ba83a9cfc9b7aed3b2}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const Elem\+Type \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to any elementary types in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a7e37a0a2146d2cfeeccb63390a3d9132}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const Elem\+Type $\ast$set\+\_\+, const std\+::size\+\_\+t size)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a fixed sized array of the templated type \char`\"{}\+T\char`\"{} in the shared memory. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_a61a2945c994bcbe84cc8dce96a189edb}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const std\+::string \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a string in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_ac6521a6731fa97be21779b1d6c7589ee}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const std\+::vector$<$ Elem\+Type $>$ \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a std\+::vector$<$\+Elem\+Type$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_ac8364e5cde6c8a2f1abc2a59035f26a6}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const Eigen\+::\+Matrix$<$ Elem\+Type, Eigen\+::\+Dynamic, 1 $>$ \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a Eigen\+::\+Matrix$<$\+Elem\+Type, Eigen\+::\+Dynamic, 1$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename First\+Type , typename Second\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a657bb799483a19a96f61706b50aca1e7}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const std\+::pair$<$ First\+Type, Second\+Type $>$ \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a std\+::pair$<$\+First\+Type, Second\+Type$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Key\+Type , typename Value\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a562e79433e54463f39c9c276b8440f4b}{shared\+\_\+memory\+::set} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, const std\+::map$<$ Key\+Type, Value\+Type $>$ \&set\+\_\+)
\begin{DoxyCompactList}\small\item\em set instanciates or get pointer to a std\+::vector$<$\+Elem\+Type$>$ or an Eigen\+::\+Matrix$<$\+Elem\+Type, any, any$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_ad017562102dbe044db2de6c79c0669d3}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, Elem\+Type \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get gets a pointer to any elementary types in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a6241b9143a2152b0c0beb784869373c7}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, Elem\+Type $\ast$get\+\_\+, const std\+::size\+\_\+t expected\+\_\+size)
\begin{DoxyCompactList}\small\item\em get gets a pointer to a fixed sized array of the templated type \char`\"{}\+T\char`\"{} in the shared memory. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_a8a952cc446e3dce8fea8cd1ea02613f9}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, std\+::string \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get gets a pointer to a string in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_afd0ab66344562f5d927dea0d319a6a08}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, std\+::vector$<$ Elem\+Type $>$ \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get gets a pointer to a std\+::vector$<$\+Elem\+Type$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Elem\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a4e230e55e38089aee71cd6df93110174}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, Eigen\+::\+Matrix$<$ Elem\+Type, Eigen\+::\+Dynamic, 1 $>$ \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get gets a pointer to a Eigen\+::\+Matrix$<$\+Elem\+Type, Eigen\+::\+Dynamic, 1$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename First\+Type , typename Second\+Type $>$ }\\void \hyperlink{namespaceshared__memory_a2579e9a10a16e0fbd006900c618addc8}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, std\+::pair$<$ First\+Type, Second\+Type $>$ \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get instanciates or get pointer to a std\+::pair$<$\+First\+Type, Second\+Type$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Key\+Type , typename Value\+Type $>$ }\\void \hyperlink{namespaceshared__memory_add6604c2716e51cdcf17de2439251089}{shared\+\_\+memory\+::get} (const std\+::string \&segment\+\_\+id, const std\+::string \&object\+\_\+id, std\+::map$<$ Key\+Type, Value\+Type $>$ \&get\+\_\+)
\begin{DoxyCompactList}\small\item\em get gets a pointer to a std\+::vector$<$\+Elem\+Type$>$ or an Eigen\+::\+Matrix$<$\+Elem\+Type, any, any$>$ in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$class Serializable $>$ }\\void \hyperlink{namespaceshared__memory_a003005dc269ebf79f08523dc0f8d1ed0}{shared\+\_\+memory\+::serialize} (const std\+::string \&segment, const std\+::string \&object, const \hyperlink{classSerializable}{Serializable} \&serializable)
\begin{DoxyCompactList}\small\item\em Serialize the instance into a string which is written in the shared memory. \end{DoxyCompactList}\item 
{\footnotesize template$<$class Serializable $>$ }\\void \hyperlink{namespaceshared__memory_a33e39adccccefb603e2dafc7ea8733e8}{shared\+\_\+memory\+::deserialize} (const std\+::string \&segment, const std\+::string \&object, \hyperlink{classSerializable}{Serializable} \&serializable)
\begin{DoxyCompactList}\small\item\em Read from the memory a string that is deserialized into the passed instance of \hyperlink{classSerializable}{Serializable}. \end{DoxyCompactList}\item 
void \hyperlink{namespaceshared__memory_afe26d531f043f59bb36ea7816b8a40bf}{shared\+\_\+memory\+::set\+\_\+verbose} (bool mode)
\begin{DoxyCompactList}\small\item\em if verbose mode set to true (starting default is false), informaton about newly created objects will be displayed in the terminal. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This file declares a class that is used for shared memory segment introspection (e.\+g. used and free memory) 

This file declares some function that encapsulate the use of the shared memory using the boost\+::interprocess package. usage\+: see demos and unit tests and documentation.

\begin{DoxyAuthor}{Author}
Vincent Berenz 

Maximilien Naveau (\href{mailto:maximilien.naveau@gmail.com}{\tt maximilien.\+naveau@gmail.\+com}) 
\end{DoxyAuthor}
\begin{DoxyRefDesc}{License}
\item[\hyperlink{license__license000024}{License}]License B\+S\+D-\/3-\/\+Clause \end{DoxyRefDesc}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2019, New York University and Max Planck Gesellschaft. 
\end{DoxyCopyright}
\begin{DoxyDate}{Date}
2019-\/05-\/22
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Vincent Berenz 

Maximilien Naveau (\href{mailto:maximilien.naveau@gmail.com}{\tt maximilien.\+naveau@gmail.\+com}) 
\end{DoxyAuthor}
\begin{DoxyRefDesc}{License}
\item[\hyperlink{license__license000028}{License}]License B\+S\+D-\/3-\/\+Clause \end{DoxyRefDesc}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2019, New York University and Max Planck Gesellschaft. 
\end{DoxyCopyright}
\begin{DoxyDate}{Date}
2019-\/05-\/22 
\end{DoxyDate}
