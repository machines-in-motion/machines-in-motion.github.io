<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>dynamic_graph_manager: 2/ Installation Procedure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">dynamic_graph_manager
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('subpage_installation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">2/ Installation Procedure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#install_sec_introduction">2.1/ Introduction</a></li>
<li class="level1"><a href="#install_sec_binary">2.2/ Binary Installation</a><ul><li class="level2"><a href="#install_subsec_official_image">2.2.1/ Install using the official image on UBUNTU 16.04</a></li>
<li class="level2"><a href="#install_subsec_binary">2.2.2/ Do the same as the official image but install uniquely the dynamic graph.</a></li>
<li class="level2"><a href="#install_subsec_troubleshooting">2.2.3/ Troubleshooting</a></li>
</ul>
</li>
<li class="level1"><a href="#install_sec_source">2.3/ From source Installation</a><ul><li class="level2"><a href="#install_subsec_python2">2.3.1/ For python2</a></li>
<li class="level2"><a href="#install_subsec_python2_3">2.3.2/ For using python3 alongside python2</a></li>
</ul>
</li>
<li class="level1"><a href="#install_sec_dgm">2.4/ Installation of dynamic graph manager</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="install_sec_introduction"></a>
2.1/ Introduction</h1>
<p>In here we are going to explain the different way of obtaining the code base. And in particular the dependencies. We <b> highly recommand </b> a binary installation of the dependencies.</p>
<h1><a class="anchor" id="install_sec_binary"></a>
2.2/ Binary Installation</h1>
<h2><a class="anchor" id="install_subsec_official_image"></a>
2.2.1/ Install using the official image on UBUNTU 16.04</h2>
<p>First clone the official image git repository. </p><div class="fragment"><div class="line">git clone https:<span class="comment">//git-amd.tuebingen.mpg.de/amd-clmc/ubuntu_installation_scripts</span></div></div><!-- fragment --><p> The repositories contains convenience installation scripts for ubuntu. The most useful script is "official/setup_ubuntu". This script is meant to be called after a fresh installation of ubuntu, and install all typical dependencies required for programming robots. These include ROS, dynamic graph and related "robot-pkg" software (e.g stack of task and pinocchio). Only 16.04 is fully supported. The script will also work on 14.04, but mostly ROS and dependencies related to SL will be installed. Usage: </p><div class="fragment"><div class="line">cd ubuntu_installation_scripts/official</div><div class="line">sudo ./setup_ubuntu install</div></div><!-- fragment --><p> This setup script is sometimes updated. You may run it again: </p><div class="fragment"><div class="line">cd ubuntu_installation_scripts/official</div><div class="line">sudo ./setup_ubuntu update</div></div><!-- fragment --><p> To see the list of software this script install (and how it install it), visit the related dockerfile (e.g. for 16.04 : <a href="https://git-amd.tuebingen.mpg.de/amd-clmc/ubuntu_installation_scripts/blob/master/official/ubuntu_16_04/docker/Dockerfile">https://git-amd.tuebingen.mpg.de/amd-clmc/ubuntu_installation_scripts/blob/master/official/ubuntu_16_04/docker/Dockerfile</a>).</p>
<p>With this process a file in /opt/openrobots/setup.bash should have been created. In order to use the binary installation you <b>MUST</b> source this file: </p><div class="fragment"><div class="line">source /opt/openrobots/setup.bash</div></div><!-- fragment --><p> one can add this line to its ".bashrc"</p>
<h2><a class="anchor" id="install_subsec_binary"></a>
2.2.2/ Do the same as the official image but install uniquely the dynamic graph.</h2>
<p>First get the robotpkg PPA. Assuming you are using Ubuntu 16.04, if not, please adjust the "xenial" to the output of <code>lsb_release -c</code>: </p><div class="fragment"><div class="line">sudo sh -c <span class="stringliteral">&quot;echo &#39;deb [arch=amd64] http://robotpkg.openrobots.org/wip/packages/debian/pub xenialrobotpkg\ndeb [arch=amd64] http://robotpkg.openrobots.org/packages/debian/pub xenial robotpkg&#39; &gt; /etc/apt/sources.list.d/robotpkg.list&quot;</span></div><div class="line">curl http:<span class="comment">//robotpkg.openrobots.org/packages/debian</span></div><div class="line">/robotpkg.key | sudo apt-key add -</div><div class="line">sudo apt-<span class="keyword">get</span> update</div></div><!-- fragment --><p>Install the following packages from robotpkg using apt-get:</p>
<div class="fragment"><div class="line">sudo apt-<span class="keyword">get</span> install -y robotpkg-dynamic-graph-v3 `# The dynamic graph` \</div><div class="line">                        robotpkg-py27-dynamic-graph-v3 `# Thedynamic graph python bindings` \</div><div class="line">                        robotpkg-tsid `# AndreaDelprete Task Space Inverse Dynamics` \</div><div class="line">                        robotpkg-pinocchio `# Eigenbased rigid body dynamics library` \</div><div class="line">                        robotpkg-hpp-fcl `# collision detection <span class="keywordflow">for</span> pinocchio` \</div><div class="line">                        robotpkg-libccd `# notsure` \</div><div class="line">                        robotpkg-octomap `# notsure` \</div><div class="line">                        robotpkg-parametric-curves `# Splineand polynomes library` \</div><div class="line">                        robotpkg-simple-humanoid-description `# Simplehumanoid robot_properties package` \</div><div class="line">                        robotpkg-eigen-quadprog `# Quadprog package` \</div><div class="line">                        robotpkg-sot-core-v3 `# DynamicGraph Utilities` \</div><div class="line">                        robotpkg-sot-tools-v3 `# DynamicGraph Utilities` \</div><div class="line">                        robotpkg-sot-dynamic-pinocchio-v3 `# DGwrapper around pinocchio` \</div><div class="line">                        robotpkg-sot-torque-control `# AndreaDelprete dynamic graph entities` \</div><div class="line">                        robotpkg-py27-eigenpy `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-pinocchio `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-parametric-curves `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-sot-core-v3 `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-sot-torque-control `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-sot-dynamic-pinocchio-v3 `# Pythonbindings` \</div><div class="line">                        robotpkg-py27-qt4-gepetto-viewer-corba `# LAAS 3Drobot viewer network client/server` ;</div></div><!-- fragment --><p>Export the following environment variables e.g. by adding exports in ~/. bashrc file:</p>
<div class="fragment"><div class="line">export PATH=/opt/openrobots/bin:$PATH</div><div class="line">export PKG_CONFIG_PATH=/opt/openrobots/lib/pkgconfig:$PKG_CONFIG_PATH</div><div class="line">export LD_LIBRARY_PATH=/opt/openrobots/lib:/opt/openrobots/lib/plugin:$LD_LIBRARY_PATH</div><div class="line">export PYTHONPATH=/opt/openrobots/lib/python2.7/site-packages:$PYTHONPATH</div><div class="line">export ROS_PACKAGE_PATH=<span class="stringliteral">&quot;/opt/openrobots/share:$ROS_PACKAGE_PATH&quot;</span></div></div><!-- fragment --><h2><a class="anchor" id="install_subsec_troubleshooting"></a>
2.2.3/ Troubleshooting</h2>
<ol type="1">
<li><b>Python 3</b>: When using python3 and you installed packages with prefix /opt/openrobots/, you have to remove the python2.7 path and add the python3.5 one.</li>
<li>Compilation problem: upon catkin_make the package "dynamic-graph" is not found.<ol type="a">
<li>make sure the environment variable concerning /opt/openrobots has been set. See the previous paragraph. In order to verify this one can run: <div class="fragment"><div class="line">env | grep openrobots</div></div><!-- fragment --></li>
<li>The folder /opt/openerobots does belong to roor and/or does not have the correct permissions. In order to fix this one can do: <div class="fragment"><div class="line">sudo chown root:root -R /opt/openerobots</div><div class="line">sudo chmod 755 -R /opt/openerobots</div></div><!-- fragment --></li>
</ol>
</li>
</ol>
<h1><a class="anchor" id="install_sec_source"></a>
2.3/ From source Installation</h1>
<h2><a class="anchor" id="install_subsec_python2"></a>
2.3.1/ For python2</h2>
<ol type="1">
<li>first make sure you have treep installed. <div class="fragment"><div class="line">pip2 install --user treep</div></div><!-- fragment --> or <div class="fragment"><div class="line">pip3 install --user treep</div></div><!-- fragment --></li>
<li>Then clone the different packages.<ul>
<li>For just the dynamic graph: <div class="fragment"><div class="line">mkdir devel # or your favorite development folder</div><div class="line">cd devel</div><div class="line">git clone git@github.com:machines-in-motion/treep_machines_in_motion.git</div><div class="line">treep --clone DYNAMIC_GRAPH</div></div><!-- fragment --> At this point you should see something like this: <div class="image">
<img src="treep-clone-dg.png" alt="treep-clone-dg.png"/>
</div>
</li>
<li>If you decided to clone every package it would look like this: <div class="fragment"><div class="line">mkdir devel # or your favorite development folder</div><div class="line">cd devel</div><div class="line">git clone git@github.com:machines-in-motion/treep_machines_in_motion.git</div><div class="line">treep --clone ALL_LAAS</div></div><!-- fragment --> At this point you should see something like this: <div class="image">
<img src="treep-clone-laas.png" alt="treep-clone-laas.png"/>
</div>
</li>
</ul>
</li>
<li>Now let us assume you have something clone in your workspace/src folder.<ul>
<li>The next step is to generate the compilation script. <div class="fragment"><div class="line">treep --compilation-script</div></div><!-- fragment --> The ouput: <div class="image">
<img src="treep-compile-script.png" alt="treep-compile-script.png"/>
</div>
 At this point treep generated a compilation script in bash that you need to <b>execute</b> anytime you do the compilation.</li>
<li>If the compilation script is not an executable you should do a <div class="fragment"><div class="line">chmod +x compilation.sh</div></div><!-- fragment --> The compilation script is based on the python script in the treep_dynamic_manager package. A quick glance should allow you to tune the installation folder and type of compilation (Debug/Release/...) A "dynamic_graph_setup.bash" is generated as well in the installation folder. If you source it you will tell your system to use the installed binary.</li>
</ul>
</li>
<li>Launch the compilation: <div class="fragment"><div class="line">./compilation.sh</div></div><!-- fragment --> This should build and install all the repositories.<ul>
<li>Troubleshooting with "sphinx" <div class="fragment"><div class="line">sudo -H pip2 install sphinx</div></div><!-- fragment --></li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="install_subsec_python2_3"></a>
2.3.2/ For using python3 alongside python2</h2>
<p>Installing the eigenpy and pinocchio libraries into the same folder creates problem when loading the libraries. Instead of using the boost_python-py35 library, eigenpy also tries to load the boost_python- py27 library. To avoid this, it is recommended to</p><ul>
<li>create a separate "devel" folder for the python3 installation like devel_py35</li>
<li>make sure to source the corresponding "dynamic_graph_setu
p.bash". And to edit the <div class="fragment"><div class="line">export PYTHONPATH=/opt/openrobots_py35/lib/python3.5/site-packages:$PYTHONPATH</div></div><!-- fragment --> Otherwise, eigenpy tries to load boost_python-py27 libraries. This boils down to using separate functions to source either python2 or python3: <div class="fragment"><div class="line">source_devel_py27() {</div><div class="line"><span class="preprocessor">  # robotpkg installation.</span></div><div class="line">  export PATH=/opt/openrobots/bin:$PATH</div><div class="line">  export PKG_CONFIG_PATH=/opt/openrobots/lib/pkgconfig:$PKG_CONFIG_PATH</div><div class="line">  export LD_LIBRARY_PATH=/opt/openrobots/lib::/opt/openrobots/lib/plugin:$LD_LIBRARY_PATH</div><div class="line">  export PYTHONPATH=/opt/openrobots/lib/python2.7/site-packages:$PYTHONPATH</div><div class="line">  export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/</div><div class="line">}</div><div class="line">source_devel_py35() {</div><div class="line">  export PATH=/opt/openrobots_py35/bin:$PATH</div><div class="line">  export PKG_CONFIG_PATH=/opt/openrobots_py35/lib/pkgconfig:$PKG_CONFIG_PATH</div><div class="line">  export LD_LIBRARY_PATH=/opt/openrobots_py35/lib:/opt/openrobots_py35/lib/plugin:$LD_LIBRARY_PATH</div><div class="line">  export PYTHONPATH=/opt/openrobots_py35/lib/python3.5/site-packages:$PYTHONPATH</div><div class="line">  export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/</div><div class="line">}</div></div><!-- fragment --> In order to build the pacakges for Python 3, use the cmake configuration as: <div class="fragment"><div class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DPYTHON_EXECUTABLE=`which python3` -DCMAKE_INSTALL_PREFIX=/path/to/your/devel_py35/workspace/devel</div></div><!-- fragment --> For using the catkin project using python3, install the following packages <div class="fragment"><div class="line">pip3 install rospkg catkin_pkg</div></div><!-- fragment --> and build the catkin workspace with python3 (make sure you have source the python3 environment variables using source_openrobots_py35) <div class="fragment"><div class="line">catkin_make -DCMAKE_BUILD_TYPE=Release -DPYTHON_EXECUTABLE=<span class="stringliteral">&quot;`which python3`&quot;</span></div></div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="install_sec_dgm"></a>
2.4/ Installation of dynamic graph manager</h1>
<ol type="1">
<li>First make sure you have treep installed. <div class="fragment"><div class="line">pip2 install --user treep</div></div><!-- fragment --> or <div class="fragment"><div class="line">pip3 install --user treep</div></div><!-- fragment --></li>
<li>Clone the repository manager "treep_machines_in_motion". All actions on the repositories can be done via the "treep" executable. <div class="fragment"><div class="line">cd</div><div class="line">mkdir devel # devel could be also devel_dg or your favorite cat name</div><div class="line">cd devel</div><div class="line">git clone git@github.com:machines-in-motion/treep_machines_in_motion.git</div><div class="line">treep --clone DYNAMIC_GRAPH_MANAGER</div><div class="line">cd workspace</div></div><!-- fragment --> If you do not have the ssh key allowing you to download it, please contact Maximilien Naveau (<a href="#" onclick="location.href='mai'+'lto:'+'max'+'im'+'ili'+'en'+'.na'+'ve'+'au@'+'gm'+'ail'+'.c'+'om'; return false;">maxim<span style="display: none;">.nosp@m.</span>ilie<span style="display: none;">.nosp@m.</span>n.nav<span style="display: none;">.nosp@m.</span>eau@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a>) or Vincent Berenz (<a href="#" onclick="location.href='mai'+'lto:'+'vbe'+'re'+'nz@'+'tu'+'e.m'+'pg'+'.de'; return false;">vbere<span style="display: none;">.nosp@m.</span>nz@t<span style="display: none;">.nosp@m.</span>ue.mp<span style="display: none;">.nosp@m.</span>g.de</a>).</li>
<li>Source "ros". Pick your favorite one (On ubuntu16.04 kinetic is the one used): <div class="fragment"><div class="line">source /opt/<a class="code" href="namespaceros.html">ros</a>/kinetic/setup.bash</div></div><!-- fragment --></li>
<li>Finally run the build process by calling the catkin executable. <div class="fragment"><div class="line">catkin_make install</div></div><!-- fragment --> </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Dynamic Graph Manager</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
